$header-height: 4em;

// Trade page animation performance fix #perfmatters
.trade-container + .positions-drawer {
    transition: opacity 0.4s ease;
}

// .app-contents--contract-mode {
//     .positions-drawer-card {
//         filter: blur(2px);
//
//         &--active, &--first, &:hover, &:focus, &:active {
//             filter: none;
//         }
//     }
// }

.positions-drawer {
    width: $POSITIONS_DRAWER_WIDTH;
    // removing 2px below for borders
    height: calc(100vh - #{$HEADER_HEIGHT} - #{$FOOTER_HEIGHT} - 2px - (#{$POSITIONS_DRAWER_MARGIN} * 4));
    margin-top: #{$POSITIONS_DRAWER_MARGIN * 2};
    position: fixed;
    z-index: 2;
    top: $HEADER_HEIGHT;
    left: 4px;
    border: 1px solid $COLOR_LIGHT_BLACK_4_SOLID;
    background-color: $COLOR_LIGHT_BLACK_4_SOLID;
    box-sizing: border-box;
    opacity: 0;
    color: $COLOR_LIGHT_BLACK_1;
    transform: translateX(-100%);
    will-change: transform, opacity;
    transition: opacity 0.3s ease, transform 0.3s ease;
    border-radius: $BORDER_RADIUS;

    &--open {
        transform: translateX(#{$POSITIONS_DRAWER_MARGIN});
        opacity: 1;
    }
    &__header {
        height: $header-height;
        display: flex;
        flex-direction: row;
        align-items: center;
        padding: 0 1em;
    }
    &__body {
        height: calc(100% - #{$header-height * 2.5});
        padding: 0.8em 0 0;
        box-sizing: border-box;
        overflow: hidden;
    }
    &__footer {
        position: relative;
        height: 6em;
        display: flex;
        justify-content: center;
        align-items: center;

        .btn {
            width: 100%;
            margin: 8px;
            height: 40px;

            span {
                font-size: 1.2em;
            }
        }
    }
    &__title {
        font-size: 1.4em;
        font-weight: bold;
    }
    &__icon-main {
        margin-right: 0.8em;
    }
    &__icon-close {
        display: inline-block;
        margin-left: auto;
        cursor: pointer;

        svg {
            height: 1.6em;
            width: 1.6em;
        }
    }
    /*
       POSITIONS DRAWER CARD STARTS
   */
    & &-card {
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        cursor: pointer;
        text-decoration: none;
        position: relative;
        color: $COLOR_LIGHT_BLACK_1;

        &__result {
            position: absolute;
            top: -1px;
            left: -1px;
            width: calc(100% + 2px);
            height: calc(100% + 2px);
            background: $COLOR_WHITE;
            opacity: 0.7;
            border-radius: $BORDER_RADIUS;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;

            &:after {
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                border-radius: $BORDER_RADIUS;
                z-index: 2;
            }
            &--won:after {
                background-image: linear-gradient(to top, rgba(16, 19, 32, 0), rgba(0, 148, 117, 0.16));
            }
            &--lost:after {
                background-image: linear-gradient(to top, rgba(16, 19, 32, 0), rgba(227, 28, 75, 0.16));
            }
        }
        &__wrapper {
            padding: 0.8em;
            margin: 0 1em;
            border: 1px solid $COLOR_WHITE;
            background: $COLOR_WHITE;
            border-radius: $BORDER_RADIUS;
            transition: transform 0.25s ease, opacity 0.25s linear;

            &:not(:last-child) {
                margin-bottom: 16px;
            }
            &--enter-done {
                opacity: 1;
                transform: translateY(0);
            }
            &--enter, &--exit {
                opacity: 0;
                transform: translateY(-16px);
            }
        }
        &--active {
            cursor: default;
        }
        &--green:before {
            background-image: linear-gradient(to top, rgba(16, 19, 32, 0), rgba(0, 148, 117, 0.16));
        }
        &--orange:before {
            background-image: linear-gradient(to top, rgba(16, 19, 32, 0), rgba(255, 153, 51, 0.16));
        }
        &--red:before {
            background-image: linear-gradient(to top, rgba(16, 19, 32, 0), rgba(227, 28, 75, 0.16));
        }
        &--active:before, &:hover:before {
            content: '';
            position: absolute;
            height: 52px;
            width: calc(100% + 18px);
            left: -9px;
            top: -9px;
            border-radius: $BORDER_RADIUS;
        }
        &__grid {
            display: grid;
            grid-template-rows: 1fr auto;

            &-underlying-trade, &-profit-payout {
                grid-template-columns: 1fr 1fr;
            }
            &-profit-payout {
                padding: 8px 0;
                background: $COLOR_LIGHT_BLACK_4;
                border-radius: $BORDER_RADIUS;
                margin-left: -4px;
                margin-right: -4px;
            }
        }
        &__purchase {
            &-price {
                font-size: 12px;
                padding: 8px;
                display: flex;
                justify-content: center;
                align-items: center;
                font-weight: bold;
            }
            &-label {
                text-transform: capitalize;
                margin-right: 0.5em;
                font-size: 10px;
                font-weight: normal;
                color: $COLOR_LIGHT_BLACK_1;
            }
        }
        &__type {
            font-size: 1.2em;
            display: flex;
            justify-content: flex-end;
            margin-right: 0.5rem;
            font-weight: bold;

            .contract-type {
                display: flex;
                flex-direction: row;
                align-items: center;

                .type-wrapper {
                    margin: 0 0.4em 0 0;
                }
                span {
                    width: 3em;
                }
            }
        }
        &__symbol {
            margin-left: 0.5rem;
            font-size: 1em;
        }
        &__indicative {
            font-size: 1.2em;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;

            &-label {
                color: $COLOR_LIGHT_BLACK_1;
                font-size: 0.8em;
                font-weight: normal;
                margin-bottom: 0.5em;
            }
            &--price-moved-up {
                color: $COLOR_GREEN_1;
            }
            &--price-moved-down {
                color: $COLOR_RED;
            }
            &--price-stable {
                color: $COLOR_LIGHT_BLACK_1;
            }
            &--no-resale {
                color: $COLOR_LIGHT_BLACK_2;
            }
        }
        &__remaining-time {
            font-size: 1em;
            color: $COLOR_LIGHT_BLACK_2;

            .remaining-time {
                display: inline;
            }
        }
        &__profit-loss {
            font-size: 12px;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;

            &-label {
                font-size: 10px;
                color: $COLOR_LIGHT_BLACK_1;
                margin-bottom: 0.5em;
                font-weight: normal;
            }
            &--negative {
                color: $COLOR_RED;

                &:before {
                    content: '-';
                    color: inherit;
                }
            }
            &--positive {
                color: $COLOR_GREEN_2;

                &:before {
                    content: '+';
                    color: inherit;
                }
            }
        }
        &__underlying-name {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            font-weight: bold;
        }
        &__sell-button {
            display: flex;
            align-items: center;
            justify-content: center;

            .btn {
                margin: 4px;
                width: 100%;

                span {
                    font-size: 1.2em;
                    font-weight: bold;
                    line-height: 1.5;
                }
            }
            &--enter-done {
                opacity: 1;
                transform: translateY(0);
            }
            &--enter, &--exit {
                opacity: 0;
                transform: translateY(-8px);
            }
        }
    }
    .result__caption {
        text-transform: capitalize;
        font-size: 1.6em;
        font-weight: bold;
        display: flex;
        justify-content: center;
        align-items: center;

        &--won {
            color: $COLOR_GREEN_1;
        }
        &--lost {
            color: $COLOR_RED;
        }
    }
    .result__close-btn:after {
        content: '\0000D7';
        font-size: 3em;
        top: 2px;
        right: 8px;
        position: absolute;
        color: $COLOR_LIGHT_GRAY_1;
        cursor: pointer;
    }
    .result__icon {
        margin-left: 10px;
    }
    /*
        POSITIONS DRAWER CARD ENDS
    */
}

// Dark Theme
.theme--dark {
    .positions-drawer {
        background: $COLOR_DARK_BLUE_3;
        border-color: $COLOR_DARK_BLUE_3;
        color: $COLOR_WHITE;

        &-card {
            color: $COLOR_WHITE;

            &__result {
                background-color: $COLOR_DARK_BLUE_3;
            }
            &__wrapper {
                background: $COLOR_DARK_BLUE_2;
                border-color: $COLOR_DARK_BLUE_2;
            }
            &__remaining-time {
                color: $COLOR_DARK_BLUE_7;
            }
            &__indicative {
                &--no-resale {
                    color: $COLOR_DARK_BLUE_7;
                }
                &--price-stable {
                    color: $COLOR_WHITE;
                }
            }
            &__grid-profit-payout {
                background: $COLOR_DARK_BLUE_3;
            }
            &__purchase-label, &__profit-loss-label, &__indicative-label {
                color: $COLOR_DARK_BLUE_7;
            }
        }
        &__title {
            color: $COLOR_DARK_BLUE_7;
        }
        &__body {
            .positions-empty, p {
                align-self: center;
                color: $COLOR_WHITE;
            }
        }
        &__footer {
            background: $COLOR_DARK_BLUE_3;
            border-color: $COLOR_DARK_BLUE_3;

            .btn.secondary.orange {
                background-color: $COLOR_DARK_BLUE_5;
                border-color: $COLOR_DARK_BLUE_5;

                span {
                    color: $COLOR_WHITE;
                    font-weight: bold;
                }
            }
        }
    }
}
